<!--
    This file is imported from dotnet standard csproj's
-->

<Project>
    <PropertyGroup>
        <DebugType>Full</DebugType>
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
        <EnlistmentRoot>$(MSBuildThisFileDirectory)</EnlistmentRoot>
        <EnlistmentRoot>$(EnlistmentRoot.TrimEnd('\\'))</EnlistmentRoot>
        <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">$(MSBuildThisFileDirectory)</SolutionDir>
        <OutputPath>$(EnlistmentRoot)\bin\$(Configuration)\x64\$(MSBuildProjectName)</OutputPath>
        <AssemblyOriginatorKeyFile>$(EnlistmentRoot)\Product\Build\UnprotectedKey.snk</AssemblyOriginatorKeyFile>
        
        <RuntimeIdentifier>win7-x64</RuntimeIdentifier>
        <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
        <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    </PropertyGroup>
    
    <!-- Set Release and symbol paths.  Not allowed to override release and symbol paths -->
    <PropertyGroup>
        <_BaseReleasePath>$(EnlistmentRoot)\Bin\$(Configuration)\$(Platform)</_BaseReleasePath>
        <BaseReleasePath>$(_BaseReleasePath)</BaseReleasePath>
        <ReleaseRoot>$(BaseReleasePath)</ReleaseRoot>
        <ReleasePath>$(ReleaseRoot)</ReleasePath>
        <!-- A boolean value that indicates whether symbols are generated by the build. -->
        <DebugSymbols>true</DebugSymbols>
        <CommandFeedBuildPath>$(EnlistmentRoot)\Product\Build\</CommandFeedBuildPath>
        <!-- Copy all files to the ReleasePath -->
        <CopyFilesToReleasePathEnabled Condition="'$(CopyFilesToReleasePathEnabled)' == ''">false</CopyFilesToReleasePathEnabled>
    </PropertyGroup>
    
    <!-- Defines the level of debug information that you want generated. Valid values are "full," "pdbonly," and "none." -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
        <DebugType>Full</DebugType>
    </PropertyGroup>
    
    <!-- A boolean value that when set to true, enables compiler optimizations. This property is equivalent to the /optimize compiler switch. -->
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
    </PropertyGroup>

    <PropertyGroup>
        <ServiceName>CommandFeed</ServiceName>
        <ServiceRoot>$(EnlistmentRoot)\Product\</ServiceRoot>
        <BuildPath>$(ServiceRoot)Build\</BuildPath>

        <!-- .net core specific settings -->
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
        <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
        
        <CodeAnalysisIgnoreGeneratedCode>true</CodeAnalysisIgnoreGeneratedCode>
        <NoWarn>$(NoWarn);1591</NoWarn>
        
        <!-- Force x64! -->
        <Prefer32Bit>false</Prefer32Bit>
        <Platform>x64</Platform>
        <!-- Compile test hooks when: explicitly told to, or when we're building on a dev machine.-->
        <DefineConstants Condition=" '$(CompileTestHooks)' == 'true' OR '$(BUILD_DEFINITIONNAME)' == '' ">INCLUDE_TEST_HOOKS;$(DefineConstants)</DefineConstants>
        <InternalsVisisibleToUnitTests>true</InternalsVisisibleToUnitTests>

    </PropertyGroup>
  
</Project>
